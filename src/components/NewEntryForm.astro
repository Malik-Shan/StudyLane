---
const {type,name,course,f_inst,f_due,s_inst,s_due,t_inst,t_due,fth_inst,fth_due,totalfee,id} = Astro.props;
import {formDate} from '../js/util';
let update:Boolean;
if(type){
  update = type === 'update';
}
//import * as Courses from '../content/courses/courses.md';
---

<span id='formRes'></span>
<div class="grid gap-4 mb-4 grid-cols-2">

  <div class="col-span-2">
    <label for="name" class="block mb-2 font-medium text-gray-900"><i class="fa-solid fa-user mr-1"></i>Name</label>
    <input type="text" name="name" id="name" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" placeholder="Name" required value={update ? (name) : ('')}>
  </div>

  <div class="col-span-2">
    <label for="course" class="block mb-2 font-medium text-gray-900">Category</label>
    <select id="course" name='course' class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 ">
      <!--{-->
      <!--Courses.frontmatter.course.map((c) => (-->
      <!--  <option selected={c === course ? ('true') : (undefined)} value={c}>{c}</option>-->
      <!--))-->
      <!--}-->
    </select>
  </div>

  <div class="col-span-2">
    <label for="totalfee" class="block mb-2 font-medium text-gray-900"><i class="fa-solid fa-file-invoice-dollar mr-1"></i>Total Fee</label>
    <input type="number" name="totalfee" id="totalfee" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" placeholder="Rs.100,000" required value={update ? (totalfee) : ('')}>
  </div>

  <div class="col-span-2 sm:col-span-1">
    <label for="f_inst" class="block mb-2 font-medium text-gray-900"><i class="fa-solid fa-file-invoice-dollar mr-1"></i>1st Installment</label>
    <input type="text" name="f_inst" id="f_inst" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" placeholder="10,000/10,000" required value={update ? (f_inst) : ('')}>
  </div>
  <div class="col-span-2 sm:col-span-1">
    <label for="f_due" class="block mb-2 font-medium text-gray-900"><i class="fa-solid fa-calendar mr-1"></i>Due Date</label>
    <input type="date" name="f_due" id="f_due" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" required value={update ? (formDate(f_due)) : ('')}>
  </div>

  <div class="col-span-2 sm:col-span-1">
    <label for="s_inst" class="block mb-2 font-medium text-gray-900"><i class="fa-solid fa-file-invoice-dollar mr-1"></i>2nd Installment</label>
    <input type="text" name="s_inst" id="s_inst" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" placeholder="10,000/10,000" required value={update ? (s_inst) : ('')}>
  </div>
  <div class="col-span-2 sm:col-span-1">
    <label for="s_due" class="block mb-2 font-medium text-gray-900"><i class="fa-solid fa-calendar mr-1"></i>Due Date</label>
    <input type="date" name="s_due" id="s_due" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" required value={update ? (formDate(s_due)) : ('')}>
  </div>

  <div class="col-span-2 sm:col-span-1">
    <label for="t_inst" class="block mb-2 font-medium text-gray-900"><i class="fa-solid fa-file-invoice-dollar mr-1"></i>3rd Installment</label>
    <input type="text" name="t_inst" id="t_inst" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" placeholder="10,000/10,000" required value={update ? (t_inst) : ('')}>
  </div>
  <div class="col-span-2 sm:col-span-1">
    <label for="t_due" class="block mb-2 font-medium text-gray-900"><i class="fa-solid fa-calendar mr-1"></i>Due Date</label>
    <input type="date" name="t_due" id="t_due" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" required value={update ? (formDate(t_due)) : ('')}>
  </div>

  <div class="col-span-2 sm:col-span-1">
    <label for="fth_inst" class="block mb-2 font-medium text-gray-900"><i class="fa-solid fa-file-invoice-dollar mr-1"></i>4th Installment</label>
    <input type="text" name="fth_inst" id="fth_inst" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" placeholder="10,000/10,000" required value={update ? (fth_inst) : ('')}>
  </div>
  <div class="col-span-2 sm:col-span-1">
    <label for="fth_due" class="block mb-2 font-medium text-gray-900"><i class="fa-solid fa-calendar mr-1"></i>Due Date</label>
    <input type="date" name="fth_due" id="fth_due" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" required value={update ? (formDate(fth_due)) : ('')}>
  </div>
</div>
<div class='btnGroups flex flex-row gap-2'>
  <button id='submitIndicator' type="submit" class="text-white group/submit [&.htmx-request]:pointer-events-none [&.htmx-request]:bg-slate-500 inline-flex items-center bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center ">
    <svg class="group-[.htmx-request]/submit:animate-spin me-1 -ms-1 w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd"></path></svg>
    SUBMIT
  </button>
  {update ? (<button id={`del-${id}`} type='button' hx-post='/api/database/spreadsheet/delete' hx-confirm='Are you sure?'
    hx-trigger='click' hx-indicator={`#del-${id}`}
    hx-swap='delete' hx-swap-oob='true' hx-headers={`{"id": "${id}"}`}
    class='text-white group/del [&.htmx-request]:pointer-events-none [&.htmx-request]:bg-slate-500 inline-flex items-center bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center '>
    <i class="fa-solid fa-trash mr-1 group-[.htmx-request]/del:animate-spin"></i>Delete
  </button> ) : ('')}
</div>

