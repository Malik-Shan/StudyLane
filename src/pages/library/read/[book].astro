---
import DefaultLayout from "@layouts/DefaultLayout.astro";

import type {CollectionEntry} from 'astro:content';
import {Image} from 'astro:assets';
import { getCollection} from "astro:content";

interface Props{
	book:CollectionEntry<'library'>
};

export async function getStaticPaths(){
	const library = await getCollection('library');

	return library.flatMap((book:CollectionEntry<'library'>) => ({
		params:{book: book.slug},
		props:{book},
	}));
}

const {book} = Astro.props;
const { Content } = await book.render();
---

<DefaultLayout title={book.data.name}>
	<section class="blog container max-w-[1050px] p-2 py-8 px-8 max-md:p-0 mx-auto">
		<div class='mb-4 flex flex-row flex-wrap justify-center items-center'>
			<a class='primaryBtn p-2 px-4 border rounded-md' download={`${book.data.name}-${book.data.edition}E.pdf`} href={`https://drive.google.com/uc?export=download&id=${book.data.drive_id}`}>Download</a>
		</div>
		<iframe class='mx-auto mb-4 border rounded-md' src={`https://drive.google.com/file/d/${book.data.drive_id}/preview`} width="640" height="800" allow="autoplay"></iframe>

		<article class='article p-8 max-lg:p-4 max-sm:p-2'>
			<Content />
		</article>
  </section>
</DefaultLayout>
<style is:global>
