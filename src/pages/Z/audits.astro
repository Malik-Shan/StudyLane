---
export const prerender = false;
import {db,Audits as zAudits,desc} from 'astro:db';
import Note from '../../components/Note.astro';
const audits = await db.select().from(zAudits).orderBy(desc(zAudits.id));
---
<!DOCTYPE html>
<html>
  <head>
    <title>Note Pad Online</title>
    <script src="https://unpkg.com/htmx.org@2.0.0" integrity="sha384-wS5l5IKJBvK6sPTKa2WZ1js3d947pvWXbPJ1OmWfEuxLgeHcEbjUUA5i9V5ZkpCw" crossorigin="anonymous"></script>
  </head>
  <body>
    <form hx-post="/partials/notes/create" hx-swap="afterbegin" hx-target="#cards">
      <textarea id='links' name='links' style="width:100%;" rows='10'></textarea>
    <button class='submit' type='submit'>Post</button>
    </form>
    <div id='cards'>
      {
      audits.map((a) => (
        <Note id={a.id} date={a.date} data={a.links} />
      ))
      }
    </div>
  </body>
</html>
<style is:global>
*, *::before, *::after {
  box-sizing: border-box;
}
/*
2. Remove default margin
*/
* {
  margin: 0;
}
form{
  padding:2rem;
}
form textarea{
  border-radius:15px;
  margin-bottom:.4rem;
  padding:.45rem;
  font-size:1.125rem;
}
form button.submit{
  width:100%;
  background-color:#46cfcf;
  color: white;
  font-size:1.125rem;
  padding:.3rem .6rem;
  border:0px;
  border-radius:5px;
}
form button.submit:hover{
  background-color:teal;
  cursor:pointer;
}
.card{
  display:block;
  border:1px solid black;
  border-radius:15px;
  padding:.5rem;
  margin-bottom:15px;
  overflow-x:auto;
}
.card.htmx-request{
  opacity:.7;
  background-color:gray;
}
#cards{
  margin-inline:.5rem;
}
.note-btn{
  background-color:red;
  color: white;
  font-size:1rem;
  padding:.3rem .6rem;
  border:0px;
  border-radius:5px;
  cursor:pointer;
}
#del-btn{
  background-color:red;
}
#update-btn{
  background-color:green;
}
#update-btn:hover{
  background-color:darkolivegreen;
}
#del-btn:hover{
  background-color:#910d0d;
}
.btns{
  display:flex;
  flex-direction:row;
  gap:5px;
  justify-content:right;
  margin-bottom:.2rem;
}
#edited{
  display:none;
  color:gray;
}
#edited[data-edited="true"]{
  display:block;
}
</style>
